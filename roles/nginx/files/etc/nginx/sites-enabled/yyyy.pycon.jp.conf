server {
    listen 80;
    server_name 2024.pycon.jp;

    root /var/www/pyconjp/2024.pycon.jp;
    index index.html;

    # Exact match for root path
    location = / {
        return 301 /ja;
    }

    # Redirect paths not starting with /ja or /en to /ja
    location ~ ^/(?!(ja|en)(/|$)) {
        return 301 /ja$request_uri;
    }

    location / {
        try_files $uri $uri.html $uri/ =404;
    }
}

server {
    listen 80;
    server_name 2023.pycon.jp;

    root /var/www/pyconjp/2023.pycon.jp;
    index index.html;

    location / {
        try_files $uri $uri.html $uri/ =404;
    }
}

server {
    listen 80;
    server_name 2023-apac.pycon.jp;

    root /var/www/pyconjp/2023.pycon.jp;
    index index.html;

    location / {
        try_files $uri $uri.html $uri/ =404;
    }
}

server {
    listen 80;
    server_name 2022.pycon.jp;

    root /var/www/pyconjp/2022.pycon.jp;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}

server {
    listen 80;
    server_name 2021.pycon.jp;

    root /var/www/pyconjp/2021.pycon.jp;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}

server {
    listen 80;
    server_name apac-2013.pycon.jp;

    root /var/www/pyconjp/apac-2013.pycon.jp.static;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}

server {
    listen 80;
    server_name 2012.pycon.jp;

    root /var/www/pyconjp/2012.pycon.jp.static;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}

server {
    listen 80;
    server_name 2011.pycon.jp;

    root /var/www/pyconjp/2011.pycon.jp.static;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
